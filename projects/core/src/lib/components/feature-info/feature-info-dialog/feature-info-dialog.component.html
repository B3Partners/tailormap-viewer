<tm-dialog [open]="dialogOpen$ | async"
           [openFromRight]="true"
           [widthMargin]="panelWidthMargin"
           [width]="(singleLayer$ | async) ? panelWidthCollapsed : panelWidth"
           class="feature-info-dialog"
           (closeDialog)="closeDialog()"
           [allowCollapse]="true"
           [collapsed]="dialogCollapsed$ | async"
           (expandCollapseDialog)="expandCollapseDialog()"
           dialogTitle="Object Information"
           i18n-dialogTitle="@@core.feature-info.object-information">
  @if ((singleLayer$ | async) === false) {
    <div class="layer-list">
      <tm-feature-info-layer-list></tm-feature-info-layer-list>
      <tm-feature-info-layer-list></tm-feature-info-layer-list>
      <tm-feature-info-layer-list></tm-feature-info-layer-list>
    </div>
  }
  <div class="feature-list">
    @if(selectedLayer$ | async; as layer) {
      @if (layer.error) {
        <tm-error-message [friendlyError]="true" [message]="layer.error"></tm-error-message>
      }
      @if (singleLayer$ | async) {
        <tm-feature-info-layer-item [layer]="getLayerListItem(layer)"></tm-feature-info-layer-item>
      }
    }
    @if(currentFeature$ | async; as feature) {
      <div class="feature-info">
        <div class="content">
          <div *ngFor="let att of feature.sortedAttributes" class="row">
            <strong>{{att.label}}</strong>
            <div [innerHTML]="att.attributeValue | htmlify"></div>
          </div>
        </div>
        <div class="buttons">
          <button mat-flat-button i18n="@@core.common.back" (click)="back()" color="primary" [disabled]="isPrevButtonDisabled$ | async">Back</button>
          <button mat-flat-button i18n="@@core.common.next" (click)="next()" color="primary" [disabled]="isNextButtonDisabled$ | async">Next</button>
        </div>
      </div>
    }
  </div>
</tm-dialog>
