<ng-container *ngIf="userDetails$ | async as userDetails">
  <tm-menubar-button [menuTrigger]="userMenu"
                     [icon]="userDetails.isAuthenticated ? 'user' : 'login'"></tm-menubar-button>

  <mat-menu #userMenu="matMenu" xPosition="after" yPosition="above">
    <button mat-menu-item (click)="showAbout()">
      <span i18n="@@core.profile.about">About</span>
    </button>
    <tm-language-toggle></tm-language-toggle>
    <button mat-menu-item disabled *ngIf="userDetails.isAuthenticated && userDetails.username">
      <span i18n="@@core.profile.logged-in-as">Logged in as</span>
      <span>{{' '}}{{userDetails.username}}</span>
    </button>
    <button mat-menu-item *ngIf="userDetails.isAuthenticated && isAdmin(userDetails)" routerLink="/admin">
      <span i18n="@@core.profile.go-to-admin">Go to admin</span>
    </button>
    <button mat-menu-item (click)="logout()" *ngIf="userDetails.isAuthenticated && userDetails.username">
      <span i18n="@@core.profile.logout">Logout</span>
    </button>
    <button mat-menu-item (click)="login()" *ngIf="!userDetails.isAuthenticated">
      <span i18n="@@core.profile.login">Login</span>
    </button>
  </mat-menu>
</ng-container>
