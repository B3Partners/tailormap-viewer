<form [formGroup]="geoServiceForm" autocomplete="off">
  <mat-form-field>
    <mat-label i18n>Title</mat-label>
    <input matInput
           [tmAutoFocus]="!!geoService"
           placeholder="Title"
           i18n-placeholder
           formControlName="title"
    />
  </mat-form-field>
  <mat-form-field>
    <mat-label i18n>URL</mat-label>
    <input matInput
           [tmAutoFocus]="!geoService"
           placeholder="URL"
           i18n-placeholder
           formControlName="url"
    />
  </mat-form-field>
  <mat-form-field>
    <mat-select formControlName="protocol">
      <mat-option *ngFor="let protocol of protocols" [value]="protocol" i18n>
        {{ protocol }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title i18n style="flex-grow: 1">Authentication and proxy</mat-panel-title>
      <mat-panel-description style="flex-grow: 1">
        {{ getAuthDescription() }}
      </mat-panel-description>
    </mat-expansion-panel-header>
    <p i18n>Enter account details below if the service requires HTTP Basic authentication. Enable reverse proxying to allow a layer which
      requires authentication to be used in a viewer by having Tailormap do the WMS requests for the end user without sending the
      credentials to the users' browser.
    </p>
    <p i18n>Reverse proxying without authentication can be used to bypass missing CORS headers but check with the server administrator if
      it's allowed and whether CORS can be enabled so proxying isn't necessary.
    </p>
    <mat-checkbox formControlName="useProxy" labelPosition="after">
      <ng-container i18n>Reverse proxy WMS requests for viewers</ng-container>
    </mat-checkbox>
    <mat-form-field>
      <mat-label i18n>Username</mat-label>
      <input matInput type="text" formControlName="username" autocomplete="off" placeholder="Username" i18n-placeholder />
    </mat-form-field>
    <tm-admin-password-field formControlName="password" label="Password" i18n-label></tm-admin-password-field>
  </mat-expansion-panel>

  <tm-admin-authorization-edit class="authorization-edit" formControlName="authorizationRules" [groups]="(groups$ | async) ?? []"></tm-admin-authorization-edit>
</form>
