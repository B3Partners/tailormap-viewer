<div class="attributes-wrapper">

  <mat-card class="attributes-table">
    <mat-card-title i18n="@@admin-core.catalog.attributes">Attributes</mat-card-title>
    <mat-card-content>
      <form [formGroup]="aliasForm">
        <mat-table
               [dataSource]="dataAttributes"
               cdkDropList
               [cdkDropListData]="dataAttributes"
               (cdkDropListDropped)="dropTable($event)">
          <ng-container matColumnDef="enabled">
            <mat-header-cell *matHeaderCellDef>
              <mat-checkbox (change)="toggleAllAttributes('hidden')" [checked]="allChecked['hidden']" [indeterminate]="someChecked['hidden']"></mat-checkbox>
            </mat-header-cell>
            <mat-cell *matCellDef="let att">
              <mat-checkbox (change)="toggleAttribute('hidden', att.name)" [checked]="isAttributeEnabled('hidden', att.name)"></mat-checkbox>
            </mat-cell>
          </ng-container>
          <ng-container matColumnDef="editable">
            <mat-header-cell *matHeaderCellDef>
              <mat-checkbox (change)="toggleAllAttributes('readonly')" [checked]="allChecked['readonly']" [indeterminate]="someChecked['readonly']"></mat-checkbox>
            </mat-header-cell>
            <mat-cell *matCellDef="let att">
              <mat-checkbox (change)="toggleAttribute('readonly', att.name)" [checked]="isAttributeEnabled('readonly', att.name)"></mat-checkbox>
            </mat-cell>
          </ng-container>
          <ng-container matColumnDef="name">
            <mat-header-cell *matHeaderCellDef></mat-header-cell>
            <mat-cell *matCellDef="let att"><div class="wrap-text" [tmTooltip]="att.name">{{att.name}}</div></mat-cell>
          </ng-container>
          <ng-container matColumnDef="type">
            <mat-header-cell *matHeaderCellDef></mat-header-cell>
            <mat-cell *matCellDef="let att"><div class="wrap-text" [tmTooltip]="att.type">{{att.type}}</div></mat-cell>
          </ng-container>
          <ng-container matColumnDef="alias">
            <mat-header-cell *matHeaderCellDef></mat-header-cell>
            <mat-cell *matCellDef="let att">
              <mat-form-field>
                <input matInput [formControlName]="att.name" />
              </mat-form-field>
            </mat-cell>
          </ng-container>
          <ng-container matColumnDef="sort">
            <mat-header-cell *matHeaderCellDef></mat-header-cell>
            <mat-cell *matCellDef="let att"><mat-icon cdkDragHandle svgIcon="reorder"></mat-icon></mat-cell>
          </ng-container>

          <ng-container matColumnDef="label-enabled">
            <mat-header-cell *matHeaderCellDef i18n="@@admin-core.common.enabled">Enabled</mat-header-cell>
          </ng-container>
          <ng-container matColumnDef="label-editable">
            <mat-header-cell *matHeaderCellDef i18n="@@admin-core.application.editable">Editable</mat-header-cell>
          </ng-container>
          <ng-container matColumnDef="label-name">
            <mat-header-cell *matHeaderCellDef i18n="@@admin-core.common.name">Name</mat-header-cell>
          </ng-container>
          <ng-container matColumnDef="label-type">
            <mat-header-cell *matHeaderCellDef i18n="@@admin-core.common.type">Type</mat-header-cell>
          </ng-container>
          <ng-container matColumnDef="label-alias">
            <mat-header-cell *matHeaderCellDef i18n="@@admin-core.common.alias">Alias</mat-header-cell>
          </ng-container>
          <ng-container matColumnDef="label-sort">
            <mat-header-cell *matHeaderCellDef i18n="@@admin-core.common.sort">Sort</mat-header-cell>
          </ng-container>

          <mat-header-row *matHeaderRowDef="columnLabels"></mat-header-row>
          <mat-header-row *matHeaderRowDef="columns"></mat-header-row>
          <mat-row *matRowDef="let row; columns: columns;" cdkDrag [cdkDragData]="row"></mat-row>
        </mat-table>
      </form>
    </mat-card-content>
  </mat-card>

  <mat-card class="geom-attributes">
    <mat-card-title i18n="@@admin-core.catalog.geometry-attributes">Geometry attributes</mat-card-title>
    <mat-card-content>
      <div *ngFor="let attribute of geomAttributes">
        {{attribute.name}} ({{attribute.type}})
      </div>
    </mat-card-content>
  </mat-card>

</div>
